function p(e,t,s,a,o,c,l,_){var i=typeof e=="function"?e.options:e;t&&(i.render=t,i.staticRenderFns=s,i._compiled=!0),a&&(i.functional=!0),c&&(i._scopeId="data-v-"+c);var n;if(l?(n=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),o&&o.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(l)},i._ssrRegister=n):o&&(n=_?function(){o.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:o),n)if(i.functional){i._injectStyles=n;var m=i.render;i.render=function(h,u){return n.call(u),m(h,u)}}else{var d=i.beforeCreate;i.beforeCreate=d?[].concat(d,n):[n]}return{exports:e,options:i}}const f={props:{title:String,action:String,blueprint:Array,meta:Array,redirectTo:String,values:Array,data:Array,items:Array},data(){return{itemsReady:[],itemsSliced:[],perPage:10,currentPage:1,totalItems:0}},mounted(){this.itemsReady=this.items,this.totalItems=this.items.length,this.sliceItems(),console.log(this.itemsSliced)},methods:{updateItems(e){this.itemsReady=e.data.data,this.totalItems=e.data.data.length,this.sliceItems(),this.$forceUpdate()},setPage(e){this.currentPage=e,this.sliceItems()},sliceItems(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;console.log(this.currentPage),this.itemsSliced=this.itemsReady.slice(e,t)},deleteRedirect(e,t){confirm("Are you sure you want to delete this redirect?")&&Statamic.$axios.post(cp_url("alt-design/alt-redirect/delete"),{from:e,id:t}).then(s=>{console.log("done"),this.updateItems(s)}).catch(s=>{console.log(s)})}}};var v=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"alt-redirect"}},[s("publish-form",{attrs:{title:t.title,action:t.action,blueprint:t.blueprint,meta:t.meta,values:t.values},on:{saved:function(a){return t.updateItems(a)}}}),s("div",{staticClass:"card overflow-hidden p-0"},[s("table",{staticClass:"data-table",attrs:{"data-size":"sm",tabindex:"0"}},[t._m(0),s("tbody",t._l(t.itemsSliced,function(a){return s("tr",{key:a.id},[s("td",[t._v(" "+t._s(a.from)+" ")]),s("td",[t._v(" "+t._s(a.to)+" ")]),s("td",[t._v(" "+t._s(a.redirect_type)+" ")]),s("td",[s("button",{staticClass:"btn",staticStyle:{color:"#bc2626"},on:{click:function(o){return t.deleteRedirect(a.from,a.id)}}},[t._v("Remove")])])])}),0)]),s("div",{staticClass:"pagination py-2"},t._l(Math.ceil(t.totalItems/t.perPage),function(a){return s("span",{key:a,staticClass:"cursor-pointer py-1 px-2 border mx-1",class:{"font-bold":a==t.currentPage},on:{click:function(o){return t.setPage(a)}}},[t._v(t._s(a))])}),0)])],1)},g=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"group from-column sortable-column"},[t("span",[e._v("From")])]),t("th",{staticClass:"group to-column pr-8"},[t("span",[e._v("To")])]),t("th",{staticClass:"group to-column pr-8"},[t("span",[e._v("Type")])]),t("th",{staticClass:"actions-column"})])])}],b=p(f,v,g,!1,null,"b57ccabc",null,null);const y=b.exports;Statamic.booting(()=>{Statamic.$components.register("alt-redirect",y)});
